{"version":3,"file":"index.js","sources":["src/auth.js"],"sourcesContent":["\n\nfunction ___$insertStyle(css) {\n    if (!css || typeof window === 'undefined') {\n        return;\n    }\n    const style = document.createElement('style');\n    style.setAttribute('type', 'text/css');\n    style.innerHTML = css;\n    document.head.appendChild(style);\n    return css;\n}\n\n/**\n * Ourodemi IDaaS React SDK\n * MIT Licensed\n */\n\nconst axios = require('axios');\n\nclass IDaaSModule{\n    refreshToken = null;\n    accessToken = null;\n    captchaToken = null;\n\n    apiVersion = 'v1';\n    isRefreshing = false;\n\n    localStoragePrefix = 'idaas-';\n    deauthHandler = function(){};\n\n    constructor(domain){\n        this.domain = domain;\n        \n        this.refreshToken = this.getLocalStorageItem('refresh-token');\n        this.refreshTokenExpiry = this.getLocalStorageItem('refresh-token-expiry') || 0;\n\n        this.accessToken = this.getLocalStorageItem('access-token');\n        this.accessTokenExpiry = this.getLocalStorageItem('access-token-expiry') || 0;        \n    }\n\n    async isAuthenticated(){\n        // check for a valid refresh token\n        if ( !this.refreshToken || \n            this._timestamp_() > this.refreshTokenExpiry ){\n            return false;\n        }\n\n        // check for a valid refresh token\n        if ( this.accessToken && \n            this.accessTokenExpiry > this._timestamp_() ){\n            return true;   \n        }\n\n        // try to obtain a new access token\n        if ( !await this.newAccessToken() ){\n            return false;\n        }\n\n        return true;\n    }\n\n    async auth({ email, username, password }){\n        return new Promise((resolve, reject) => {\n            axios.post(this.uri('auth'), {\n                email, username, password\n            }).then(({data , status}) => {\n                if ( status !== 200 ){\n                    return resolve(false);\n                }\n                \n                let { \n                    refreshToken, \n                    accessToken, \n                    refreshTokenExpiry, \n                    accessTokenExpiry,\n                    user\n                } = data.data;\n                \n                if ( !refreshToken ){\n                    return false;\n                }\n        \n                this.setLocalStorageItem('refresh-token', refreshToken);\n                this.setLocalStorageItem('access-token', accessToken);\n                this.setLocalStorageItem('refresh-token-expiry', refreshTokenExpiry);\n                this.setLocalStorageItem('access-token-expiry', accessTokenExpiry);\n                this.setLocalStorageItem('user-data', JSON.stringify(user));\n\n                this.refreshToken = refreshToken;\n                this.refreshTokenExpiry = refreshTokenExpiry;\n                this.accessTokenExpiry = accessTokenExpiry;\n                this.accessToken = accessToken;\n\n                resolve(true);\n            }).catch(err => {\n                resolve(false);\n            });\n        });\n    }\n\n    /**\n     * O\n     * @param {*} captcha \n     * @param {*} param1 \n     * @returns \n     */\n    async sso(captcha, { email, phone }){\n        return new Promise(async (resolve, reject) => {\n            if ( !this.captchaToken ){\n                return resolve(false);\n            }\n\n            axios.get(this.uri('sso'), {\n                headers: {\n                    'x-captcha-token': this.captchaToken,\n                    'x-captcha-code': captcha\n                },\n                query: { email, phone }\n            }).then(({ data, status }) => {\n                /**\n                 * 404 - invalid email\n                 * 401 - invalid captcha attempt\n                 * 429 - too many sso requests\n                 */\n                resolve(status);\n            }).catch(err => {\n                resolve(false);\n            });\n        });\n    }\n    \n    /**\n     * Invalidates refresh token so that no more access tokens\n     * can be requested with it. Refresh tokens may still remain\n     * valid and a webhook can be attached on the IDaaS platform\n     * to deal with that.\n     * @returns {boolean}\n     */\n    async deauth(){\n        return new Promise(async (resolve, reject) => {\n            if ( !this.refreshToken ){\n                return resolve(false);\n            }\n\n            this.removeLocalStorageItem('refresh-token');\n            this.removeLocalStorageItem('access-token');\n            this.removeLocalStorageItem('refresh-token-expiry');\n            this.removeLocalStorageItem('access-token-expiry');\n            this.removeLocalStorageItem('user-data');\n\n            axios.delete(this.uri('auth'), {\n                headers:{\n                    'x-refresh-token': this.refreshToken\n                }\n            }).then(res => {\n                resolve(true);\n            }).catch(err => {\n                resolve(false);\n            });\n\n            this.refreshToken = null;\n            this.accessToken = null;\n        });\n    }\n    \n    /**\n     * \n     * @param {boolean} force - force a new access token \n     * even if current one is still valid \n     * @returns {boolean} - true | false\n     */\n    async newAccessToken(force = false){\n        return new Promise(async (resolve, reject) => {\n            if ( !this.refreshToken ){\n                this.deauthHandler(false);\n                return resolve(false);\n            }\n\n            if ( this.isRefreshing ){\n                let intervalId = setInterval(() => {\n                    if ( !this.isRefreshing ){\n                        clearInterval(intervalId);\n                        resolve(true);\n                    }\n                }, 500);\n                return;\n            }\n\n            if ( this.accessTokenExpiry > this._timestamp_() && !force ){\n                return resolve(true);\n            }\n\n            this.isRefreshing = true;\n\n            await axios.get(this.uri('auth'), {headers:{\n                'x-refresh-token': this.refreshToken\n            }}).then(({data, status}) => {\n                let { accessToken, expiry, user } = data.data;\n                \n                if ( !accessToken ){\n                    resolve(false);\n                    return this.deauthHandler({ status });\n                }\n        \n                this.setLocalStorageItem('access-token', accessToken);\n                this.setLocalStorageItem('user-data', JSON.stringify(user));\n                this.setLocalStorageItem('access-token-expiry', expiry);\n\n                this.accessToken = accessToken;\n                this.accessTokenExpiry = expiry;\n\n                resolve(data.data);\n            }).catch(err => {\n                resolve(false);\n                return this.deauthHandler({ status: 500 })\n            });\n\n            this.isRefreshing = false;\n        });\n    }\n\n    async obtainCaptcha(){\n        return new Promise(async (resolve, reject) => {\n            await axios.get(this.uri('captcha'))\n            .then(({ data }) => {\n                resolve(data.data);\n            }).catch(err => {\n                resolve(err);\n            });\n        });\n    }\n\n    /**\n     * \n     * @param {function} handler \n     * @returns \n     */\n    async request(handler){\n        if ( this._timestamp_() > this.refreshTokenExpiry ){\n            return this.deauthHandler();\n        }\n\n        if ( this._timestamp_() > this.accessTokenExpiry ){\n            await this.newAccessToken();\n        }\n\n        handler(this.accessToken);\n    }\n\n    setDeauthHandler(handler){\n        this.deauthHandler = handler;\n    }\n\n    async getUser(){\n        if ( !this.isAuthenticated() ){\n            return false;\n        }\n\n        return new Promise(async (resolve, reject) => {\n            try{\n                let user = JSON.parse(\n                    this.getLocalStorageItem('user-data') || '{}'\n                );\n\n                if ( user.user_id ){\n                    return resolve(user);\n                }\n            }catch(e){\n                // move ahead\n            }\n\n            await axios.get(this.uri('user'), {\n                headers:{\n                    'x-access-token':this.accessToken\n                }\n            }).then(({data, status}) => {\n                if ( status != 200 ){\n                    return resolve(false);\n                }\n\n                this.setLocalStorageItem('user-data', JSON.stringify(data.data));\n                resolve(data.data);\n            }).catch(err => {\n                resolve(false);\n            });\n        });\n    }\n\n    _timestamp_(){\n        return Math.floor(Date.now() / 1000);\n    }\n\n    uri(e){\n        return `https://${this.domain}/${this.apiVersion}/${e}`\n    }\n    \n    /* LOCAL STORAGE WARPPERS FOR PREFIXING */\n\n    getLocalStorageItem(key){\n        return localStorage.getItem(`${this.localStoragePrefix+key}`);\n    }\n\n    setLocalStorageItem(key, value){\n        return localStorage.setItem(`${this.localStoragePrefix+key}`, value);\n    }\n\n    removeLocalStorageItem(key){\n        return localStorage.removeItem(`${this.localStoragePrefix+key}`);\n    }\n}\n\nmodule.exports = IDaaSModule;\n//# sourceMappingURL=auth.js.map\n"],"names":[],"mappings":"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"}